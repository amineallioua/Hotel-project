;/*FB_PKG_DELIM*/

__d("react-relay",["react-relay/ReactRelayContext","react-relay/ReactRelayFragmentContainer","react-relay/ReactRelayLocalQueryRenderer","react-relay/ReactRelayPaginationContainer","react-relay/ReactRelayQueryRenderer","react-relay/ReactRelayRefetchContainer","react-relay/relay-hooks/EntryPointContainer.react","react-relay/relay-hooks/ProfilerContext","react-relay/relay-hooks/RelayEnvironmentProvider","react-relay/relay-hooks/loadEntryPoint","react-relay/relay-hooks/loadQuery","react-relay/relay-hooks/useClientQuery","react-relay/relay-hooks/useEntryPointLoader","react-relay/relay-hooks/useFragment","react-relay/relay-hooks/useLazyLoadQuery","react-relay/relay-hooks/useMutation","react-relay/relay-hooks/usePaginationFragment","react-relay/relay-hooks/usePrefetchableForwardPaginationFragment_EXPERIMENTAL","react-relay/relay-hooks/usePreloadedQuery","react-relay/relay-hooks/useQueryLoader","react-relay/relay-hooks/useRefetchableFragment","react-relay/relay-hooks/useRelayEnvironment","react-relay/relay-hooks/useSubscribeToInvalidationState","react-relay/relay-hooks/useSubscription","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=b("react-relay/relay-hooks/loadQuery").loadQuery;e.exports={ConnectionHandler:(c=b("relay-runtime")).ConnectionHandler,QueryRenderer:b("react-relay/ReactRelayQueryRenderer"),LocalQueryRenderer:b("react-relay/ReactRelayLocalQueryRenderer"),MutationTypes:c.MutationTypes,RangeOperations:c.RangeOperations,ReactRelayContext:b("react-relay/ReactRelayContext"),applyOptimisticMutation:c.applyOptimisticMutation,commitLocalUpdate:c.commitLocalUpdate,commitMutation:c.commitMutation,createFragmentContainer:b("react-relay/ReactRelayFragmentContainer").createContainer,createPaginationContainer:b("react-relay/ReactRelayPaginationContainer").createContainer,createRefetchContainer:b("react-relay/ReactRelayRefetchContainer").createContainer,fetchQuery_DEPRECATED:c.fetchQuery_DEPRECATED,graphql:c.graphql,readInlineData:c.readInlineData,requestSubscription:c.requestSubscription,EntryPointContainer:b("react-relay/relay-hooks/EntryPointContainer.react"),RelayEnvironmentProvider:b("react-relay/relay-hooks/RelayEnvironmentProvider"),ProfilerContext:b("react-relay/relay-hooks/ProfilerContext"),fetchQuery:c.fetchQuery,loadQuery:a,loadEntryPoint:b("react-relay/relay-hooks/loadEntryPoint"),useClientQuery:b("react-relay/relay-hooks/useClientQuery"),useFragment:b("react-relay/relay-hooks/useFragment"),useLazyLoadQuery:b("react-relay/relay-hooks/useLazyLoadQuery"),useEntryPointLoader:b("react-relay/relay-hooks/useEntryPointLoader"),useQueryLoader:b("react-relay/relay-hooks/useQueryLoader"),useMutation:b("react-relay/relay-hooks/useMutation"),usePaginationFragment:b("react-relay/relay-hooks/usePaginationFragment"),usePreloadedQuery:b("react-relay/relay-hooks/usePreloadedQuery"),useRefetchableFragment:b("react-relay/relay-hooks/useRefetchableFragment"),usePrefetchableForwardPaginationFragment_EXPERIMENTAL:b("react-relay/relay-hooks/usePrefetchableForwardPaginationFragment_EXPERIMENTAL"),useRelayEnvironment:b("react-relay/relay-hooks/useRelayEnvironment"),useSubscribeToInvalidationState:b("react-relay/relay-hooks/useSubscribeToInvalidationState"),useSubscription:b("react-relay/relay-hooks/useSubscription")}}),null);
__d("useIGDTypingIndicatorSubscription_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8071880052909777"}),null);
__d("useIGDTypingIndicatorSubscription.graphql",["useIGDTypingIndicatorSubscription_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input_data"}],c=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input_data"}],concreteType:"XDTDirectRealtimeEventResponse",kind:"LinkedField",name:"xdt_direct_realtime_event",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"event",storageKey:null},{alias:null,args:null,concreteType:"XDTDirectRealtimeOperation",kind:"LinkedField",name:"data",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"op",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useIGDTypingIndicatorSubscription",selections:c,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useIGDTypingIndicatorSubscription",selections:c},params:{id:b("useIGDTypingIndicatorSubscription_instagramRelayOperation"),metadata:{is_distillery:!0,subscriptionName:"xdt_direct_realtime_event"},name:"useIGDTypingIndicatorSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("useIGDTypingIndicator",["FBLogger","IGDTypingIndicatorUtils","react","react-compiler-runtime","react-relay","useCurrentRoute","useIGDTypingIndicatorSubscription.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useMemo;var j=h!==void 0?h:h=b("useIGDTypingIndicatorSubscription.graphql");function a(a){var b=d("react-compiler-runtime").c(7),e=c("useCurrentRoute")();e=(e=e==null?void 0:(e=e.rootView.props)==null?void 0:e.viewer_igid)!=null?e:"";var f;b[0]!==a?(f=function(b){if(b!=null){b=d("IGDTypingIndicatorUtils").transformIGDTypingPayload(b);b!=null&&a(b)}},b[0]=a,b[1]=f):f=b[1];var g;b[2]!==e?(g={input_data:{user_id:e}},b[2]=e,b[3]=g):g=b[3];b[4]!==f||b[5]!==g?(e={onError:k,onNext:f,subscription:j,variables:g},b[4]=f,b[5]=g,b[6]=e):e=b[6];f=e;g=f;d("react-relay").useSubscription(g)}function k(a){c("FBLogger")("igd_web_on_msgr").catching(a).warn("IGD typing indicator: Error with subscription setup")}g["default"]=a}),98);
__d("IGDTypingIndicatorProvider.react",["IGDTypingIndicatorContext","IGDTypingIndicatorUtils","ReQL","ReQLSuspense","clearInterval","react","react-compiler-runtime","setInterval","useIGDTypingIndicator","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useEffect;b.useMemo;var l=b.useRef,m=b.useState,n=1e3,o=11e3;function a(a){var b=d("react-compiler-runtime").c(24);a=a.children;var e=(h||(h=c("useReStore")))(),g=m(),i=g[0],p=g[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=[],b[0]=g):g=b[0];g=m(g);var q=g[0],r=g[1];b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=[],b[1]=g):g=b[1];g=m(g);var s=g[0],t=g[1],u=l(null),v=d("IGDTypingIndicatorUtils").useThreadIdFromIGId(e,i==null?void 0:i.threadIgId),w=d("IGDTypingIndicatorUtils").useContactIdFromSenderIGId(e,i==null?void 0:i.senderIgId),x;b[2]!==e.tables.messages||b[3]!==q?(g=function(){return d("ReQL").fromTableDescending(e.tables.messages).filter(function(a){var b=q.some(function(b){return d("IGDTypingIndicatorUtils").isNewMessageAfterTypingEvent(b,a)});return b})},x=[q,e.tables.messages],b[2]=e.tables.messages,b[3]=q,b[4]=g,b[5]=x):(g=b[4],x=b[5]);var y=d("ReQLSuspense").useArray(g,x,f.id+":58");b[6]!==y||b[7]!==q?(g=function(){var a=q.filter(function(a){return!y.some(function(b){return d("IGDTypingIndicatorUtils").isNewMessageAfterTypingEvent(a,b)})});t(function(){return a})},x=[q,y],b[6]=y,b[7]=q,b[8]=g,b[9]=x):(g=b[8],x=b[9]);k(g,x);b[10]!==i||b[11]!==w||b[12]!==v?(g=function(){if(i&&v!=null&&w!=null){i.senderIgId;i.threadIgId;var a=babelHelpers.objectWithoutPropertiesLoose(i,["senderIgId","threadIgId"]),b=babelHelpers["extends"]({},a,{senderId:w,threadKey:v});r(function(a){if(b.activityStatus===d("IGDTypingIndicatorUtils").IGDTypingStatus.STOPPED_TYPING)return a.filter(function(a){return!d("IGDTypingIndicatorUtils").shouldTypingEventStop(a,b)});var c=a.findIndex(function(a){return d("IGDTypingIndicatorUtils").isSameThreadSenderEvent(a,b)});return c===-1?[].concat(a,[b]):a.map(function(a,d){return d===c?babelHelpers["extends"]({},a,{timestamp:b.timestamp}):a})})}},x=[i,w,v],b[10]=i,b[11]=w,b[12]=v,b[13]=g,b[14]=x):(g=b[13],x=b[14]);k(g,x);b[15]!==q.length?(g=function(){q.length>0?u.current=c("setInterval")(function(){var a=Date.now();r(function(b){return b.filter(function(b){return b.timestamp+o>a})})},n):q.length===0&&u.current!=null&&(c("clearInterval")(u.current),u.current=null);return function(){u.current&&(c("clearInterval")(u.current),u.current=null)}},x=[q.length],b[15]=q.length,b[16]=x,b[17]=g):(x=b[16],g=b[17]);k(g,x);b[18]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){p(a)},b[18]=g):g=b[18];x=g;c("useIGDTypingIndicator")(x);b[19]!==s?(g={typingEvents:s},b[19]=s,b[20]=g):g=b[20];x=g;s=x;b[21]!==a||b[22]!==s?(g=j.jsx(c("IGDTypingIndicatorContext").Provider,{value:s,children:a}),b[21]=a,b[22]=s,b[23]=g):g=b[23];return g}g["default"]=a}),98);